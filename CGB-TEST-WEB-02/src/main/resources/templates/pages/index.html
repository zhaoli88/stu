<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>熊猫大侠餐饮服务</title>
<!-- ALL STYLESHEET -->
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
<link href="css/font-awesome.min.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet">
<link href="css/responsive.css" rel="stylesheet">
<link href="css/responsive.css" rel="stylesheet">
<link href="css/swiper.min.css" rel="stylesheet">

</head>
<body>
	<!-- header -->
	<header class="header">
		<!-- header top -->
		<div class="header-top">
			<div class="container">
				<div class="row">
					<div class="col-sm-3">
						<ul class="list-inline">
							<li>
								<div class="dropdown">
									<a class="dropdown-toggle" data-toggle="dropdown"
										aria-haspopup="true" aria-expanded="false"><img
										src="images/log1.png" alt="" /></a>
								</div>
							</li>
						</ul>
					</div>
					<div class="col-sm-9">
						<ul class="list-inline pull-right">
							<li><a href="javasript:void(0)"><i class="fa fa-user"></i></a></li>
							<li><a href="javasript:void(0)" class="favorite"><i class="fa fa-heart-o"></i>收藏</a></li>
							<li><a href="#"><i class="fa fa-file-o"></i>浏览记录</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		
		<!-- header bottom -->
		<div class="header-bottom">
			<div class="row">
				<div class="col-sm-12">
					<nav class="navbar navbar-default">
						<div class="container">
							<!-- Brand and toggle get grouped for better mobile display -->
							<div class="navbar-header">
								<button type="button" class="navbar-toggle collapsed"
									data-toggle="collapse" data-target="#header-bottom"
									aria-expanded="false">
									<span class="sr-only">什么鬼,这个是</span> <span
										class="icon-bar"></span> <span class="icon-bar"></span> <span
										class="icon-bar"></span>
								</button>
							</div>

							<!-- Collect the nav links, forms, and other content for toggling -->
							<div class="collapse navbar-collapse" id="header-bottom">
								<ul class="nav navbar-nav">
									<li class="active"><a href="javascript:void(0)" class="dropdown-toggle first-page"
										data-toggle="dropdown" role="button" aria-haspopup="true"
										aria-expanded="false"><span style="font-size: 20px">首页</span></a></span>
									</li>
									<li><a id="loveMV" href="javascript:void(0)"><span style="font-size: 20px">火锅及串串香</a></span> 
									    <span class="label label-danger text-center hidden-xs">New 
									    <i class="fa fa-caret-right"></i></span></li>	
									<li><a id="schoolMV" href="javascript:void(0)"><span style="font-size: 20px">人气奶茶店</span></a></li>
									<li><a id ="costumeMV" href="javascript:void(0)"><span style="font-size: 20px">面条及米粉店</span></a></li>
									<li><a id ="comedyMV" href="javascript:void(0)"><span
										   style="font-size: 20px">特级厨师教学</span></a></li>
									<li><a id="draculaMV" href="javascript:void(0)"><span style="font-size: 20px">宵夜及烧烤</a></span> 
									    <span class="label label-info text-center hidden-xs">New <i
											  class="fa fa-caret-right"></i></span></li>
									<li><a id="cartoonMV" href="javascript:void(0)"><span
										   style="font-size: 20px">特色早餐店</span></a></li>
								</ul>
								<form class="navbar-form navbar-right" role="search">
									<div class="form-group">
										<input type="text" class="form-control"
											placeholder="请搜索餐饮加盟服务"><span class="nav-search"><a
											href="javascript:void(0)" class="fa fa-search"><i ></i></a></span>
									</div>
								</form>
							</div>
						</div>
					</nav>
				</div>
			</div>
		</div>
	</header>
	
	<!-- 轮播 -->
	<section class="home">
		<div class="intro">
		<center>
			<div class="swiper-container">
    <div class="swiper-wrapper">
        <div class="swiper-slide"><img src="images/cy/lun/lun31.png"></div>
        <div class="swiper-slide"><img src="images/cy/lun/lun32.png"></div>
        <div class="swiper-slide"><img src="images/cy/lun/lun33.png"></div>
        <div class="swiper-slide"><img src="images/cy/lun/lun34.png"></div>
        <div class="swiper-slide"><img src="images/cy/lun/lun35.png"></div>
        <div class="swiper-slide"><img src="images/cy/lun/lun36.png"></div>
        <div class="swiper-slide"><img src="images/cy/lun/lun37.png"></div>
        <div class="swiper-slide"><img src="images/cy/lun/lun38.png"></div>
    </div>
    <!-- 如果需要分页器 -->
    <div class="swiper-pagination"></div>
  
	</div>
	    </center>
			 
		</div>
	</section>
	


<!-- 一项目列表 -->
	<div class="col-sm-3" id="dataContainerId" style="display: none">
		<div class="thumbnail">
			<!--span class="e-label"><div>Sale</div></span-->
			<span class="service-link text-center"> <img id="imgId"
			style="width:200px;height: 260px"
				class="img-responsive" src="images/f-pro-1.jpg" alt="">
				<div class="list-inline">
					<a href=""><i class="fa fa-eye"></i></a> <a href=""><i
						class="fa fa-link"></i></a>
				</div>
			</span>
			<div class="caption">
				<div class="category" id="filmName">
					
				</div>
				<div class="pull-right" id="starId">
					<i id="star" class="fa fa-star"></i>
				</div>
				<h3 id="introduce">叭叭叭叭叭叭</h3>
				<strong>免费</strong>
				<div>
					<a href="javascript:void(0)" id="uploadId" class="btn btn-default" onclick=baoming() role="button">我要报名</a><span
						id="favoriteId" class="pull-right"><i class="fa fa-heart-o"></i> 收藏</span>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- 一个项目列表 -->


	
<!-- 项目列表 -->
<div id="movieClumns">
	<section class="featured-product">
		<div class="container">
			<div class="row">
				<div class="col-sm-12">
					<div class="">
						<h1>
							<span class="t-color-1">餐饮合伙项目展示</span>
						</h1>
						<div class="heading-border b-color-1"></div>
					</div>
				</div>
			</div>
			<!-- section title -->
			<div id="carousel-example-generic" class="carousel slide"
				data-ride="carousel">
				<ol class="carousel-indicators" id="pageId">
					<li id="leftId" data-target="#carousel-example-generic" data-slide-to="0"
						class="active"><i class="fa fa-angle-left"></i></li>
					<li id="rightId" data-target="#carousel-example-generic" data-slide-to="1"><i
						class="fa fa-angle-right"></i></li>
				</ol>
				<div class="carousel-inner" role="listbox">
					<div class="item active" id="active">
						<div class="row" id="rowId">
							
						 <!-- 插入单个项目列表对象 -->	
							
						</div>
					</div>
				</div>
	</section>
	
	

	<!-- social icons -->
	<section class="social-icons">
		<div class="container">
			<div class="row">
				<div class="col-sm-12">
					<ul class="list-inline text-center">
						<li><a href="#"><i class="fa fa-facebook"></i></a></li>
						<li><a href="#"><i class="fa fa-spotify"></i></a></li>
						<li><a href="#"><i class="fa fa-tumblr"></i></a></li>
						<li><a href="#"><i class="fa fa-share-alt"></i></a></li>
						<li><a href="#"><i class="fa fa-linkedin"></i></a></li>
						<li><a href="#"><i class="fa fa-delicious"></i></a></li>
						<li><a href="#"><i class="fa fa-instagram"></i></a></li>
						<li><a href="#"><i class="fa fa-dropbox"></i></a></li>
						<li><a href="#"><i class="fa fa-soundcloud"></i></a></li>
						<li><a href="#"><i class="fa fa-pinterest"></i></a></li>
						<li><a href="#"><i class="fa fa-google-plus"></i></a></li>
						<li><a href="#"><i class="fa fa-github-alt"></i></a></li>
						<li><a href="#"><i class="fa fa-skype"></i></a></li>
						<li><a href="#"><i class="fa fa-stumbleupon"></i></a></li>
						<li><a href="#"><i class="fa fa-youtube"></i></a></li>
					</ul>
				</div>
			</div>
		</div>
	</section>

	<footer>
		<div class="footer-bottom">
			<div class="container">
				<div class="row">
					<div class="col-sm-12 text-center">
						<p>
							
						</p>
						<ul class="list-inline center-block">
							<li><a href="#"><h3>
							<span class="t-color-4"><a href="https://cd.meituan.com/meishi/" target="_blank" title="点击查询报考进度">欢迎查看实体店面</a></span>
									</h3></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</footer>
	
<!-- 引入所有的js文件 -->
<script src="js/jquery.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<script src="js/swiper.min.js"></script>
<script type="text/javascript">
//添加的效果
var mySwiper = new Swiper ('.swiper-container', {
    direction: 'horizontal', // 
    loop: true, // 循环模式选项
    effect: 'cube',
    
	centeredSlides: true,
    
  })        
  
	
	function baoming(){
	window.location.href = "doBaoMingUI";
}
	
	$(function() {
		$("#header-bottom").on("click", "#loveMV, #schoolMV, #costumeMV, #comedyMV, #draculaMV, #cartoonMV", function(){
			var category = $(this).children("span").html();
			$("#movieClumns").data("category", category);
			// 清空对象
			$("#movieClumns").empty();
			// 查询分类的数据
			doQueryCateGorgObjects();
		});
		
		// 给*名查找按钮添加事件
		$(".nav-search").click(doQueryByName);
		
		// 给首页添加事件,重新刷新主页面
		$(".first-page").click(function(){
			location.href="doIndexUI";
		});
		// 给分页按钮添加事件
		//$("#fa fa-angle-left").on("click", ".fa fa-angle-left", doLastPage);
		$("#pageId").on("click", "#leftId, #rightId", doJumpToPage)
		// 加载*信息
		doGetObjcets();
		
		// 查询已经收藏的的*
		$(".favorite").click(function() {
			var url = "project/doFindObjectById";
			$.post(url,function(result) {
				if (result.state == 1) {
					$("#movieClumns").data("data", result.data);
					 // 跳转到query页面
					doJumpQueryPage();
				}
			})
		});
		
		// 给*添加点击事件
		$("#imgId").click(function() {
			var data = $(this).data("rowData");
			var url = "doDetailUI";
			$(".intro").css("display", "none");
			$("#movieClumns").empty();
			// 重新绑定数据到
			$(".header-bottom").data("rowData", data);
			$("#movieClumns").load(url);
			
		});
		
		// 给收藏添加事件
		$("#favoriteId").click(function() {
			// 获得容器的主对象
			var obj = $(this).parents("#dataContainerId");
			var data = $(obj).find("#imgId").data("rowData");
			var params = {filmName:data.name};
			var url = "project/doSaveObjectByName";
			$.post(url,params,function(result) {
				if (result.state == 1) {
					alert(result.message)
				}
			});
		})
		
		
		// 点击看项目
		$("#uploadId").click(
				function() {
					// 获得容器的主对象
					var obj = $(this).parents("#dataContainerId");
					var data = $(obj).find("#imgId").data("rowData");
					// 直接页面跳转，不发ajax
					/* location.href = "downLoad/downLoad.do?filmName="+data.name+"&fileName="+data.route; */
					
		})
		
	});
	
	// 跳转到详情页
    function doDetailPage() {
		
	}
	
	// 根据类名查询
	function doQueryCateGorgObjects() {
		$("#movieClumns").data("data", null);
		doGetObjcets();
		doJumpQueryPage();
	}
	
	//根据名查询
	function doQueryByName() {
		// 先查数据再跳转
	   var url = "project/doFindObjectByName"
	   var name = $(".form-control").val();
	   if (!name) {
		   $(".form-control").prop("placeholder", "请输入内容^.^");
	   }
	   var params = {"name":name};
	   $.post(url, params, function(result) {
		   if (result.state == 1) {
			   // 得到数据以后，绑定在movieClumns上
			   $("#movieClumns").data("data", result.data);
			   // 跳转到query页面
			   doJumpQueryPage();
		   } else {
			   alert(result.message)
		   }
	   })
	}
	
	function doJumpQueryPage(){
		$(".intro").css("display", "none");
		var url ="doCategoryPageUI";
		$("#movieClumns").load(url);
	}
	// 加载*数据
	function doGetObjcets() {
		var url = "project/doFindPageObjects";
		// 取出页码值
		var pageCurrent = $("#pageId").data("pageCurrent");
		// 取出分类名称
		var category = $("#movieClumns").data("category");
		var categoryId = 0;
		// 转换成相对应的
		if(category == "火锅及串串香") {
			categoryId = 1;
		}else if (category == "人气奶茶店") {
			categoryId = 2;
		}else if (category == "面条及米粉店") {
			categoryId = 3;
		}else if (category == "特级厨师教学") {
			categoryId = 4;
		}else if (category == "宵夜及烧烤") {
			categoryId = 5;
		}else if (category == "特色早餐店") {
			categoryId = 6;
		}
		if(!pageCurrent){
			pageCurrent = 1;
		}
		var params = {"pageCurrent":pageCurrent,
					  "categoryId":categoryId};
		$.getJSON(url, params, function(result){
			if (result.state == 1) {
				doInitData(result.data.records);
				// 把页码信息绑定在pageId上
				$("#pageId").data("pageCurrent", result.data.pageCurrent);
				$("#pageId").data("pageCount", result.data.pageCount);
			} else {
				alert(result.message);
			}
		});
	}
	
	// 初始化*信息
	function doInitData(data) {
		for (var i in data) {
			var cloneDiv = $("#dataContainerId").clone(true);
			// 将div显示
			$(cloneDiv).css("display", "block");
			$(cloneDiv).find(".category").html(data[i].name);
			$(cloneDiv).find("#introduce").html(data[i].lable);
			$(cloneDiv).find("img").prop("src", data[i].route);
			// 修改是否是vip
			var strong = data[i].vip?"提供宿舍":"跟踪扶持";
			$(cloneDiv).find("strong").html(strong);
			// 修改评分
			doAddGrade(data[i].grade, cloneDiv);
			// 把数据绑定到img对象上面，就是最大的div上面
			$(cloneDiv).find("img").data("rowData", data[i]);
			// 克隆展示*div
			$("#rowId").append(cloneDiv);
		}
	}
	
	// 修改评分系统
	function doAddGrade(data, cloneDiv) {
		for(var i=0;i<data;i++){
			var star = $("#star").clone(true);
			$(cloneDiv).find("#starId").append(star);
		}
		// 最后删除被克隆的对象
	    $(cloneDiv). find("#star").first().remove();
	}
	
	// 点击上一页
	function doJumpToPage() {
		// 我们在跳转页码之前，我们先要取出当前页码的数据（pageCurrent,pageCount）
 		var pageCurrent = $("#pageId").data("pageCurrent");
 		var pageCount = $("#pageId").data("pageCount");
 		// 我们获取点击对象的class属性
 		var id = $(this).prop("id"); 
 		if (id == "leftId" && pageCurrent > 1) {   
 			pageCurrent--;
 		} else if (id == "rightId" && pageCurrent < pageCount) { 
 			pageCurrent++;
 		} 
 		$("#pageId").data("pageCurrent", pageCurrent);
 		// 在加载数据之前，先把div清理了在加载
		$("#rowId").empty();
 		// 最后我们直接执行ajax方法
 		doGetObjcets();
	}
</script>

   <!-- 引入的模仿QQ的抖动效果 -->
   <title>纯JS写的右下角QQ抖动效果</title>
<script>
/*** 窗口抖动 ***/ 
function shake(){ 
	var a=['bottom','right'],b=0;
	var u=setInterval(function(){
		document.getElementById("lovexin1").style[a[b%2]]=(b++)%4<2?0:4 + "px";
		if(b>17){
			clearInterval(u);
			b=0;
		}
	 },30)
}
/*** 窗口抖动 ***/ 

document.write('<div id="lovexin1" style="z-index:99999; position:fixed;font-size: 12px; width: 390px; height: 312px;cursor:pointer;display:block;right:0px;bottom:0px;"><a href="#"><img src="images/tc1.png"/></a></div>');

shake();
setInterval(shake,5000);
</script>



</body>
</html>